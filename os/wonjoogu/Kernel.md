# 1. 커널

* 커널은 프로세스 관리, 메모리 관리, 저장장치 관리와 같은 운영체제의 핵심적인 기능을 모아놓은 것

* 자동차에 비유하자면 엔진에 해당
* 운영체제의 성능은 커널이 좌우한다.
* 스마트폰의 운영체제에도 커널이 있다.
* 하지만, 일반 사용자(사용자 모드)는 커널에 접근을 할 수 없기 때문에 원칙적으로는 파일 입출력, 프로세스 생성 등 커널의 기능을 사용하지 못한다.
그래서 운영체제에서 제공하는 것이 시스템 콜(System Call)이다.   

### 시스템 콜 (System Call)
* 응용 프로그램이 운영체제 기능을 요청하기 위해서 운영체제는 시스템 콜을 제공
* 시스템 콜은 커널과 사용자 사이의 인터페이스 역할을 하는 것으로 쉘(Shell)에서 명령어나 서브 루틴 형식으로 운영체제의 기능을 호출
* 즉, 사용자가 직접 커널에 접근을 할 수 없기 때문에 시스템 콜을 활용해야 한다.
* 보통 시스템 콜을 직접 사용하기 보다는, 해당 시스템 콜을 사용해서 만든 각 언어별 라이브러리(API)를 사용한다.
* 시스템 콜은 운영체제의 기능을 호출하는 함수이다.

# 2. 커널의 구성

* 운영체제의 핵심 기능을 모아놓은 커널이 주로 하는 일은 프로세스 관리, 메모리 관리, 파일 시스템 관리, 입출력 관리, 프로세스 간 통신 관리 등이다.   

핵심 기능 | 설명
|------- | ----------|
프로세스 관리 | 프로세스에 CPU를 배분하고 작업에 필요한 제반 환경을 제공
메모리 관리 | 프로세스에 작업 공간을 배치하고 실제 메모리 보다 큰 가상공간을 제공
파일 시스템 관리 | 데이터를 저장하고 접근할 수 있는 인터페이스 제공
입출력 관리 | 필요한 입력과 출력 서비스를 제공
프로세스 간 통신 관리 | 공동 작업을 위한 각 프로세스 간 통신 환경을 지원   

* 커널의 핵심 기능은 유기적으로 복잡하게 얽혀 있다. 

* 커널은 이러한 기능을 어떻게 구현하는가에 따라 **단일형 구조 커널**, **계층형 구조 커널**, **마이크로 구조 커널** 로 구분된다.   
---
* 단일형 구조 커널

  * 초창기의 운영체제 구조
  
  * 커널의 핵심 기능을 구현하는 모듈들이 구분 없이 하나로 구성되어 있다. 
  * 단일형 구조에 속하는 대표적인 운영체제는 MS-DOS, VMS, 초기의 유닉스 운영체제
  * 장점  
  
    * 모듈이 거의 분리되지 않았기에 모듈 간의 통신 비용이 줄어들어 효율적인 운영 가능
  
  * 단점
  
    * 모든 모듈이 하나로 묶여 있기 때문에 버그나 오류를 처리하기 어렵다.
    
    * 운영체제의 여러 기능이 서로 연결되어 있어 상호 의존성이 높기 때문에 기능상의 작은 결함이 시스템 전체로 확산될 수 있다.
    * 다양한 환경의 시스템에 적용하기 어렵다. 여러 종류의 컴퓨터에 이식하려면 수정이 필요한데 단일형 구조에서는 수정이 어렵기 때문에
    이식성이 낮다.
    * 현대의 운영체제는 매우 크고 복잡하기 때문에 완전 단일형 구조의 운영체제를 구현하기가 어렵다.
    
      <p align="center"><img src="https://user-images.githubusercontent.com/50662573/111811672-a4161e00-891a-11eb-8e4e-f922071d2ecd.png" width="60%" height="50%"></img></p>
    
* 계층형 구조 커널
  
  * 단일형 구조 커널이 발전된 형태
  
  * 다양한 하드웨어와 사용자의 요구를 수용하기 위해 계속 계층과 기능을 추가 -> 커널의 크기가 계속 커지고 필요한 하드웨어의 용량이 늘어남, 커널 소스가 방대해짐에 따라 오류 잡기도 어려워짐
  * 비슷한 기능을 가진 모듈을 묶어서 하나의 계층으로 만들고 계층 간의 통신을 통해 운영체제를 구현하는 방식
  * 비슷한 기능을 모아 모듈화 했기 때문에 단일형 구조보다 버그나 오류를 쉽게 처리 가능
  * 오류가 발생했을 때 전체 커널을 고치는 것이 아니라 해당 계층만 따로 수정하면 되기 때문에 디버깅하기도 쉽다.
  * 마이크로소프트의 윈도우를 비롯해 오늘날의 운영체제는 대부분 이 구조
  
<p align="center"><img src="https://user-images.githubusercontent.com/50662573/111811852-d758ad00-891a-11eb-9e93-42f31c588428.png" width="60%" height="50%"></img></p>

  
* 마이크로 구조 커널

  * 계층형 구조 커널의 접근 방식돠 반대로 개발된 커널
  
  * 프로세스 관리, 메로리 관리, 프로세스 간 통신 관리 등 가장 기본적인 기능만 제공
  * 마이크로 구조에서 각 모듈은 독립적으로 작동하기 때문에 하나의 모듈이 실패해도 전체 운영체제가 멈추지 않음
  * 많은 컴퓨터에 이식하기 쉽고 커널이 가벼워 CPU 용량이 작은 시스템에서도 적용 가능
  * 대표적인 운영체제인 마하(Mach)는 애플의 PC 운영체제인 OS X와 모바일 운영체제인 iOS의 커널로 사용되어 유명해짐
  
<p align="center"><img src="https://user-images.githubusercontent.com/50662573/111811983-f7886c00-891a-11eb-9fad-9f30184cdbaf.png" width="60%" height="50%"></img></p>
