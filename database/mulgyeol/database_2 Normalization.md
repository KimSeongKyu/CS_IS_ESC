# Database - 2 Normalization


### [Reference]

- [https://wkdtjsgur100.github.io/anomaly/](https://wkdtjsgur100.github.io/anomaly/)
- [https://yaboong.github.io/database/2018/03/09/database-normalization-1/](https://yaboong.github.io/database/2018/03/09/database-normalization-1/)

## 💡정규화를 왜 진행하나요?

### 정규화란?

- Attribute간에 존재하는 함수적 종속성을 분석해서 관계형 스키마를 더 좋은 구조로 정제해 나가는 일련의 과정
- 데이터의 중복을 제거하고 속성들을 본래의 제자리에 위치 시키는 것.

### 정규화를 진행하는 이유

- 정보의 중복과 갱신 이상이 생기지 않도록하고, 정보의 손실을 막는다.
- 실세계를 훌륭하게 나타내고, 애트리뷰트들간의 관계가 잘 표현되는 것을 보장한다.
- 무결성 제약조건의 시행을 간단하게 하며, 효율성을 높인다.

---

## 💡제 3정규형까지설명해주세요.

### 제 1 정규화

- `반복되는 그룹 속성을 제거`한 뒤 기본 테이블의 `기본키를 추가`해 새로운 테이블을 생성하고 기존의 테이블과 1:N의 관계를 형성하는 과정
- 반복되는 그룹 속성이란 같은 성격과 내용의 컬럼이 연속적으로 나타나는 컬럼을 말한다.
- LIVE 수업때 배운 내용과 알려진 내용의 약간의 차이가 있다. 이게 같은 내용일지..?
    - 수업 : 위와 같음
    - 일반적 : 릴레이션에 속한 모든 속성의 도메인이 원자 값으로만 구성되어 있으면 제1정규형에 속한다. (도메인에 여러 개인 값이 있는가)

### 제 2 정규화

- 복합키(Composite Primiary Key)에 전체적으로 의존하지 않는 속성 제거.
- 제 2 정규화의 대상이 되는 테이블은 키가 `여러 칼럼` 으로 구성된 경우이다.
- `복합키의 일부분에 의해 종속되는 것`을 `부분적 함수 종속관계`라 하며 이를 제거 하는 작업이다.

### 제 3 정규화

- 기본키에 의존하지 않고 일반 컬럼에 의존하는 컬럼들을 제거한다.
- 이행적 함수 종속관게를 갖는 컬럼을 제거하는 과정이다.

---

## 💡데이터의 중복을 피할수있는데 역정규화는 왜실행하나요? / 모든 테이블에 정규화를 진행하나요?

### 역정규화란?

- 역정규화(denormalization)는 이전에 정규화된 데이터베이스에서 성능을 개선하기 위해 사용되는 전략이다. 컴퓨팅에서 역정규화는 일부 쓰기 성능의 손실을 감수하고 데이터를 묶거나 데이터의 복제 사본을 추가함으로써 데이터베이스의 읽기 성능을 개선하려고 시도하는 과정이다.
- 정규화된 릴레이션은 하나의 릴레이션을 분해하기 때문에 원하는 자료가 하나의 릴레이션에 존재하지 않아 외래키를 이용해 참조해야하는 상황이 잦아진다. 이는 데이터베이스에 저장된 자료를 검색하는 시간을 증가시키며 성능을 저하시킬 수 있다.
- 얻고자 하는 데이터를 읽는 비용의 효율성과, 정규화의 장점으로 얻는 효율성을 고려하여 데이터베이스를 설계하는 작업이 필요하다.

---

## 💡이상현상에 대해 설명하시오.

좋은 관계형 데이터베이스를 설계하는 목적 중 하나가 정보의 **이상 현상(Anomaly)** 이 생기지 않도록 고려해 설계하는 것이다.

이상 현상은 **갱신 이상(Modification Anomaly), 삽입 이상(Insertion Anomaly), 삭제 이상(Deletion Anomaly)** 으로 구성된다.

- 갱신 이상(Modification Anomaly) : 반복된 데이터 중에 일부를 갱신 할 시 데이터의 불일치가 발생한다.
- 삽입 이상(Insertion Anomaly) : 불필요한 정보를 함께 저장하지 않고서는 어떤 정보를 저장하는 것이 불가능하다.
- 삭제 이상(Deletion Anomaly) : 필요한 정보를 함께 삭제하지 않고서는 어떤 정보를 삭제하는 것이 불가능하다.

### 예시

![http://dl.dropbox.com/s/eisx1gc2bsr61xr/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202018-12-24%2013.17.04.png](http://dl.dropbox.com/s/eisx1gc2bsr61xr/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202018-12-24%2013.17.04.png)

위 테이블은 한 회사의 근무자(employee) 테이블이다. 근무자가 속한 부서(Department), 참여하고 있는 학생 그룹(Student_Group)을 나타낸다.

- **갱신 이상** : 만약에 `A. Bruchs`의 부서가 CIS에서 Marketing으로 바뀌었다고 가정해보자. 테이블의 4, 5번째 행의 CIS를 둘 다 바꾸지 않고 하나만 바꾼다면 `A.Bruchs`의 부서는 어느 부서에 속해있는지 알 수 없게 된다.
- **삽입 이상** : 새로운 부서 Engineering이 신설되었고 아직 근무자는 없다고 가정해보자. 하지만 이 부서에 관련한 정보는 불필요한 정보를 함께 입력하지 않는 한 위 테이블에 입력할 수 없다.
- **삭제 이상** : 만약에 Accounting 부서에 속한 사람이 `J.Longfellow` 단 한 명이라고 가정하자. `J.Longfellow`의 정보(첫번째 행)를 삭제하면 Accounting 부서에 대한 정보도 사라지게 된다.

### 해결 방법

- 이상 현상은 정규화를 통해 방지할 수 있다.

---

## 💡정규화 단계별 과정에 대해 설명하시오.

### 보이스코드 정규형(BCNF)

- 제3 정규형에서 결정자가 후보키가 아닌 함수 종속을 제거한다.
- **릴레이션 R의 모든 결정자가 후보키이면 릴레이션 R은 Boyce-Codd 정규형에 속한다.**

### 제 4 정규형

- 다중치 종속 제거

### 제 5 정규형

- 후보키를 통하지 않은 조인 종속을 제거한다.